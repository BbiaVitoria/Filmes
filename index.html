<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo de Filmes Din√¢mico</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>üé¨ Meu Cat√°logo de Filmes Pessoal</h1>
    </header>

    <main>
        
        <section id="adicionar-filme-section">
            <h2>‚ûï Adicionar Novo Filme</h2>
            <form id="filme-form">
                <div class="input-group">
                    <label for="titulo">T√≠tulo:</label>
                    <input type="text" id="titulo" required>
                </div>
                <div class="input-group">
                    <label for="ano">Ano:</label>
                    <input type="number" id="ano" required min="1850" max="2100">
                </div>

                <div class="input-group">
    <label for="genero">G√™nero:</label>
    <select id="genero" required>
        <option value="">-- Selecione um G√™nero --</option>
        <option value="A√ß√£o">A√ß√£o</option>
        <option value="Aventura">Aventura</option>
        <option value="Anima√ß√£o">Anima√ß√£o</option>
        <option value="Fantasia">Fantasia</option>
        <option value="Fic√ß√£o Cient√≠fica">Fic√ß√£o Cient√≠fica</option>
        <option value="Terror">Terror</option>
    </select>
</div>

                <div class="input-group full-width">
                    <label for="sinopse">Sinopse Curta:</label>
                    <textarea id="sinopse" required rows="3"></textarea>
                </div>
                <div class="input-group full-width">
                    <label for="imagem">URL da Imagem (P√¥ster):</label>
                    <input type="url" id="imagem" value="https://via.placeholder.com/250x350/1C768F/FFFFFF?text=Novo+Filme">
                </div>
                <button type="submit" class="full-width">Adicionar ao Cat√°logo</button>
            </form>
        </section>
        
        <hr>

        <section id="catalogo-exibicao">
            <h2>‚≠ê Filmes em Destaque</h2>
            <div id="catalogo-filmes" class="catalogo-grid">
                </div>
        </section>// Chave para armazenar os filmes no navegador
const STORAGE_KEY = 'catalogoDeFilmes_V2';

// 1. Inicializa ou carrega os filmes do localStorage
function carregarFilmes() {
    const filmesSalvos = localStorage.getItem(STORAGE_KEY);
    // Se houver dados salvos, usa eles. Caso contr√°rio, usa uma lista inicial.
    return JSON.parse(filmesSalvos) || [
        {
            titulo: "O Segredo do Mar",
            ano: 2023,
            genero: "Aventura",
            sinopse: "Uma equipe de exploradores descobre uma cidade submersa e seus mist√©rios.",
            imagem: "https://via.placeholder.com/250x350/007bff/FFFFFF?text=Aventura+2023"
        },
        {
            titulo: "C√≥digo Silencioso",
            ano: 2022,
            genero: "Suspense",
            sinopse: "Um hacker precisa desvendar um c√≥digo complexo antes que seja tarde demais.",
            imagem: "https://via.placeholder.com/250x350/dc3545/FFFFFF?text=Suspense+2022"
        }
    ];
}

let filmes = carregarFilmes();

// 2. Fun√ß√£o para salvar o array 'filmes' no localStorage
function salvarFilmes() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(filmes));
}


// 3. Fun√ß√£o para criar o cart√£o HTML de um filme
function criarCartaoFilme(filme) {
    const card = document.createElement('div');
    card.classList.add('filme-card');

    // O atributo onerror garante que se a URL da imagem estiver inv√°lida, uma imagem padr√£o ser√° exibida.
    card.innerHTML = `
        <img src="${filme.imagem}" alt="P√¥ster do filme ${filme.titulo}" onerror="this.onerror=null;this.src='https://via.placeholder.com/250x350/CCCCCC/000000?text=Sem+Imagem';">
        <h3>${filme.titulo}</h3>
        <p><strong>Ano:</strong> ${filme.ano}</p>
        <p><strong>G√™nero:</strong> ${filme.genero}</p>
        <p class="sinopse">${filme.sinopse}</p>
    `;

    return card;
}


// 4. Fun√ß√£o principal para renderizar o cat√°logo (RECARREGA A LISTA)
function renderizarCatalogo() {
    const catalogoContainer = document.getElementById('catalogo-filmes');
    
    // Limpa os cart√µes atuais antes de renderizar a lista atualizada
    catalogoContainer.innerHTML = '';
    
    // Percorre o array de filmes e adiciona cada cart√£o ao container
    filmes.forEach(filme => {
        const cartao = criarCartaoFilme(filme);
        catalogoContainer.appendChild(cartao);
    });
}


// 5. Fun√ß√£o que lida com o envio do formul√°rio
function handleFormSubmit(event) {
    event.preventDefault(); // Impede o recarregamento da p√°gina

    // Captura os valores do formul√°rio
    const novoFilme = {
        titulo: document.getElementById('titulo').value,
        ano: parseInt(document.getElementById('ano').value),
        genero: document.getElementById('genero').value,
        sinopse: document.getElementById('sinopse').value,
        // Garante que haja um valor padr√£o se o campo de imagem for deixado vazio
        imagem: document.getElementById('imagem').value.trim() || "https://via.placeholder.com/250x350/1C768F/FFFFFF?text=Novo+Filme" 
    };

    // Adiciona o novo filme no IN√çCIO do array
    filmes.unshift(novoFilme);

    // Salva a lista atualizada no localStorage
    salvarFilmes();

    // Renderiza o cat√°logo novamente com o novo filme
    renderizarCatalogo();

    // Limpa o formul√°rio para a pr√≥xima adi√ß√£o
    document.getElementById('filme-form').reset();
    
    alert(`Filme "${novoFilme.titulo}" adicionado e salvo!`);
}


// 6. Inicia a renderiza√ß√£o e configura o listener do formul√°rio
document.addEventListener('DOMContentLoaded', () => {
    // 6a. Renderiza o cat√°logo com os dados iniciais/salvos ao carregar
    renderizarCatalogo();

    // 6b. Adiciona o listener para o formul√°rio
    const filmeForm = document.getElementById('filme-form');
    if (filmeForm) {
        filmeForm.addEventListener('submit', handleFormSubmit);
    }
});

    </main>

    <footer>
        <p>Desenvolvido com HTML, CSS e JavaScript (localStorage para persist√™ncia).</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>